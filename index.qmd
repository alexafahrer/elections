---
title: "Index"
format: html
editor: visual
---

```{r}
#| label: load-packages
#| message: false

library(tidyverse)
library(sf)
library(usmap)

presidents <- read_csv("data/1976-2020-president.csv", show_col_types = FALSE)

presidents1 <- presidents |>
  filter(party_detailed %in% c("DEMOCRAT", "REPUBLICAN")) |>
  select(party_detailed, year, state, candidatevotes, totalvotes) |>
  mutate(perc_votes = candidatevotes / totalvotes) |>
  arrange(party_detailed) |>
  group_by(year, state) |>
  summarize(rep_dem_diff = diff(perc_votes))


presidents1
```

```{r}
presidents
```

```{r}
#| label: maps

plot_usmap("states")

map_data <- presidents |>
  filter(year == 1976) |>
  group_by(state) |>
  filter(candidatevotes == max(candidatevotes)) |>
  ungroup() |>
  select(state_fips, party_detailed) |>
  rename(fips = state_fips, values = party_detailed)

plot_usmap("states", data = map_data) +
  scale_fill_manual(values = c("blue", "red")) 

```
